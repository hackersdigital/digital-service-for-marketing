{% extends "base.html" %}
{% block title %}Forms • Digital Service{% endblock %}
{% block content %}
<h1 class="text-2xl font-semibold mb-6">Available Forms</h1>

<div class="mb-6">
  <input id="formSearch" type="text" placeholder="Search forms..."
         class="w-full md:w-1/2 rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-600" />
</div>

<div class="space-y-10" id="formGroups">
  {% for client, forms in groups.items() %}
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">{{ client|capitalize }}</h2>
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        {% for f in forms %}
          <a href="/f/{{ f.client_slug }}/{{ f.form_slug }}"
             class="group block rounded-xl border border-gray-200 bg-white p-5 hover:border-brand-600 hover:shadow-md transition">
            <div class="flex items-start justify-between gap-3">
              <h3 class="font-medium group-hover:text-brand-700">{{ f.name }}</h3>
              <span class="text-[10px] px-2 py-1 rounded-full bg-gray-100 text-gray-600 uppercase tracking-wide">
                {{ f.form_slug }}
              </span>
            </div>
            <p class="mt-2 text-sm text-gray-600">Open and submit this form.</p>
            <div class="mt-4 text-sm text-brand-700 font-medium">Open →</div>
          </a>
        {% endfor %}
      </div>
    </section>
  {% endfor %}
</div>

<script>
  // simple client-side search
  const input = document.getElementById('formSearch');
  input?.addEventListener('input', () => {
    const q = input.value.toLowerCase();
    document.querySelectorAll('#formGroups a').forEach(card => {
      const text = card.textContent.toLowerCase();
      card.parentElement.classList.toggle('hidden', !text.includes(q));
    });
  });
</script>
{% endblock %}
